es un paquete oficial de la empresa Spatie que permite **asignar roles y permisos** a los usuarios de una aplicación Laravel de forma flexible y escalable.

- 📌 Sitio oficial: https://spatie.be/docs/laravel-permission
    
- 📦 Repositorio: [https://github.com/spatie/laravel-permission](https://github.com/spatie/laravel-permission)
    

---

### ✅ ¿Es compatible con Laravel 12?

**Sí**, es totalmente compatible. Spatie mantiene el paquete actualizado y sigue siendo uno de los más usados y recomendados para **Laravel 9, 10, 11 y 12**.  
Solo asegúrate de instalar la versión más reciente (`^6.0` al momento de hoy).

---

### ✅ Ventajas de usar Spatie

- ✅ **Sencillo de implementar**, documentado y probado.
- ✅ Usa Eloquent, compatible con Breeze, Jetstream, Livewire, etc.
- ✅ Puedes asignar múltiples **roles** a un mismo usuario.
- ✅ Permite asignar **permisos individuales** a usuarios sin necesidad de roles.
- ✅ Puedes consultar permisos y roles directamente en Blade y controladores.
- ✅ **Caching integrado** para mejorar el rendimiento.
- ✅ Migrations automáticas para la base de datos.

---

### ❌ Desventajas

- ❌ Agrega cierta complejidad si no se organiza bien (recomendable tener un `RoleSeeder` y `PermissionSeeder` desde el principio).
- ❌ Puede ser excesivo si solo necesitas **dos o tres niveles fijos** sin permisos personalizados.
- ❌ Si no se usa correctamente, podrías duplicar lógica entre controladores y vistas.

---
### 🔧 PASO 1: Instalar Spatie

Asegúrate de estar dentro del proyecto Laravel:

```bash
composer require spatie/laravel-permission
```
---

### 🛠️ PASO 2: Publicar archivos del paquete

```bash
php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider"
```
`

Esto generará el archivo de configuración `config/permission.php` y las migraciones necesarias.

---

### 🗄️ PASO 3: Ejecutar migraciones

```bash
php artisan migrate
```
Esto creará las tablas:

- `roles`
- `permissions`
- `model_has_roles`
- `model_has_permissions`
- `role_has_permissions`

---

### 🧠 PASO 4: Agregar el trait al modelo User

Abre `app/Models/User.php` y agrega:

```php
use Spatie\Permission\Traits\HasRoles;

class User extends Authenticatable
{
    use HasRoles;
}

```
---

### 🌱 PASO 5: Crear Seeder para Roles y Permisos

```bash
php artisan make:seeder RoleAndPermissionSeeder
```
Dentro del seeder, agrega:

```php
use Spatie\Permission\Models\Role;
use Spatie\Permission\Models\Permission;

public function run(): void
{
    $admin     = Role::create(['name' => 'admin']);
    $garzon    = Role::create(['name' => 'garzon']);
    $cocina    = Role::create(['name' => 'cocina']);
    $ventas    = Role::create(['name' => 'ventas']);

    $admin->givePermissionTo(Permission::create(['name' => 'ver panel']));
    // Más permisos los agregaremos modularmente según avance el desarrollo
}
```

Y ejecuta:

```bash
php artisan db:seed --class=RoleAndPermissionSeeder
```
---

### 🛡️ PASO 6: Asignar rol a un usuario

En un seeder, Tinker o desde el controlador:

```php
$user = \App\Models\User::find(1); 
$user->assignRole('admin');
```
---

### 🔐 PASO 7: Proteger rutas o vistas

**En controlador:**

```php

public function index()
{
    $this->authorize('ver panel'); // si usas Gate
    abort_unless(auth()->user()->hasRole('admin'), 403);
}

```
**En Blade:**

```blade

@role('admin')
    <a href="/admin">Admin Panel</a>
@endrole

```