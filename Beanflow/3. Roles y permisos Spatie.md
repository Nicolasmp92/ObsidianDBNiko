es un paquete oficial de la empresa Spatie que permite **asignar roles y permisos** a los usuarios de una aplicaciÃ³n Laravel de forma flexible y escalable.

- ðŸ“Œ Sitio oficial: https://spatie.be/docs/laravel-permission
    
- ðŸ“¦ Repositorio: [https://github.com/spatie/laravel-permission](https://github.com/spatie/laravel-permission)
    

---

### âœ… Â¿Es compatible con Laravel 12?

**SÃ­**, es totalmente compatible. Spatie mantiene el paquete actualizado y sigue siendo uno de los mÃ¡s usados y recomendados para **Laravel 9, 10, 11 y 12**.  
Solo asegÃºrate de instalar la versiÃ³n mÃ¡s reciente (`^6.0` al momento de hoy).

---

### âœ… Ventajas de usar Spatie

- âœ… **Sencillo de implementar**, documentado y probado.
- âœ… Usa Eloquent, compatible con Breeze, Jetstream, Livewire, etc.
- âœ… Puedes asignar mÃºltiples **roles** a un mismo usuario.
- âœ… Permite asignar **permisos individuales** a usuarios sin necesidad de roles.
- âœ… Puedes consultar permisos y roles directamente en Blade y controladores.
- âœ… **Caching integrado** para mejorar el rendimiento.
- âœ… Migrations automÃ¡ticas para la base de datos.

---

### âŒ Desventajas

- âŒ Agrega cierta complejidad si no se organiza bien (recomendable tener un `RoleSeeder` y `PermissionSeeder` desde el principio).
- âŒ Puede ser excesivo si solo necesitas **dos o tres niveles fijos** sin permisos personalizados.
- âŒ Si no se usa correctamente, podrÃ­as duplicar lÃ³gica entre controladores y vistas.

---
### ðŸ”§ PASO 1: Instalar Spatie

AsegÃºrate de estar dentro del proyecto Laravel:

```bash
composer require spatie/laravel-permission
```
---

### ðŸ› ï¸ PASO 2: Publicar archivos del paquete

```bash
php artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider"
```
`

Esto generarÃ¡ el archivo de configuraciÃ³n `config/permission.php` y las migraciones necesarias.

---

### ðŸ—„ï¸ PASO 3: Ejecutar migraciones

```bash
php artisan migrate
```
Esto crearÃ¡ las tablas:

- `roles`
- `permissions`
- `model_has_roles`
- `model_has_permissions`
- `role_has_permissions`

---

### ðŸ§  PASO 4: Agregar el trait al modelo User

Abre `app/Models/User.php` y agrega:

```php
use Spatie\Permission\Traits\HasRoles;

class User extends Authenticatable
{
    use HasRoles;
}

```
---

### ðŸŒ± PASO 5: Crear Seeder para Roles y Permisos

```bash
php artisan make:seeder RoleAndPermissionSeeder
```
Dentro del seeder, agrega:

```php
use Spatie\Permission\Models\Role;
use Spatie\Permission\Models\Permission;

public function run(): void
{
    $admin     = Role::create(['name' => 'admin']);
    $garzon    = Role::create(['name' => 'garzon']);
    $cocina    = Role::create(['name' => 'cocina']);
    $ventas    = Role::create(['name' => 'ventas']);

    $admin->givePermissionTo(Permission::create(['name' => 'ver panel']));
    // MÃ¡s permisos los agregaremos modularmente segÃºn avance el desarrollo
}
```

Y ejecuta:

```bash
php artisan db:seed --class=RoleAndPermissionSeeder
```
---

### ðŸ›¡ï¸ PASO 6: Asignar rol a un usuario

En un seeder, Tinker o desde el controlador:

```php
$user = \App\Models\User::find(1); 
$user->assignRole('admin');
```
---

### ðŸ” PASO 7: Proteger rutas o vistas

**En controlador:**

```php

public function index()
{
    $this->authorize('ver panel'); // si usas Gate
    abort_unless(auth()->user()->hasRole('admin'), 403);
}

```
**En Blade:**

```blade

@role('admin')
    <a href="/admin">Admin Panel</a>
@endrole

```